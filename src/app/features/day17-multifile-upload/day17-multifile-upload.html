<!-- <h2>File upload with progress bar indicator</h2>

<input type="file" accept=".jpg,.jpeg,.png" (change)="onFileBrowse($event)" />

<div class="media-upload-table-container" *ngIf="uploadedMedia.length > 0">
  <table class="media-upload-table table table-borderless">
    <thead>
      <tr>
        <th style="width: 246px"></th>
        <th class="media-progress-bar"></th>
        <th style="width: 100px"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let media of uploadedMedia; let i = index">
        <td>
          <div class="d-flex flex-row align-items-center">
            <div style="margin-right: 8px">
              <img
                class="add-media-img"
                width="300"
                height="150"
                src="{{media.FileUrl}}"
              />
            </div>
            <div class="media-file-name">
              <span style="word-wrap: break-word; white-space: pre-line">
                {{ media.FileName }}
              </span>
            </div>
          </div>
        </td>
        <td style="vertical-align: middle">
          <div class="d-flex flex-column" style="margin-top: 18px">
            <div>
              <div class="first-progress">
                <div
                  [ngStyle]="{ 'width.%': media.FileProgress }"
                  class="second-progress"
                ></div>
              </div>
            </div>
            <div class="text-center">
              {{ media.FileProgessSize }} of {{ media.FileSize }}
            </div>
          </div>
        </td>
        <td style="vertical-align: middle; text-align: right">
          <div class="media-upload-check">
            <span *ngIf="media.FileProgress === 100"> Completed</span>
          </div>
        </td>
        <td style="vertical-align: middle">
          <a class="remove-media-txt" (click)="removeImage(i)"> Remove </a>
        </td>
      </tr>
    </tbody>
  </table>
</div> -->

<h2>File upload with progress bar indicator</h2>

<input
  type="file"
  (change)="onFileBrowse($event)"
  multiple
  [accept]="allowedFileTypes.join(',')"
/>
@if (uploadedMedia.length > 0) {
<div class="media-upload-table-container">
  <table class="media-upload-table table table-borderless">
    <thead>
      <tr>
        <th style="width: 246px"></th>
        <th class="media-progress-bar"></th>
        <th style="width: 100px"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let media of uploadedMedia; let i = index">
        <td>
          <div class="d-flex flex-row align-items-center">
            <div style="margin-right: 8px">
              <img
                *ngIf="media.FileUrl"
                class="add-media-img"
                width="100"
                height="80"
                [src]="media.FileUrl"
              />
            </div>
            <div class="media-file-name">
              <!-- <span>{{ media.FileName }}</span> -->
            </div>
          </div>
        </td>
        <td style="vertical-align: middle">
          <div class="d-flex flex-column">
            <div>
              <div class="first-progress">
                <div
                  [ngStyle]="{ 'width.%': media.FileProgress }"
                  class="second-progress"
                ></div>
              </div>
            </div>
            <div class="text-center">
              {{ media.FileProgessSize }} of {{ media.FileSize }}
            </div>
          </div>
        </td>
        <td style="vertical-align: middle; text-align: right">
          <div class="media-upload-check">
            <span *ngIf="media.FileProgress === 100"> ✅ Completed</span>
          </div>
        </td>
        <td style="vertical-align: middle">
          <a class="remove-media-txt" (click)="removeImage(i)"> ❌ Remove </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>
}


<h2 class="mb-3">Uploaded Files</h2>

<div>
  @if (files.length > 0) {
  <table class="table table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col">File</th>
        <th scope="col">Type</th>
        <th scope="col">Size</th>
        <th scope="col">Uploaded At</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      @for (file of files; track file.id; let i = $index) {
        <tr>
          <td>{{ i + 1 }}</td>
          <td>
            <div class="d-flex align-items-center">
              @if (file.type.startsWith('image/')) {
                <img [src]="file.FileUrl" alt="preview" class="me-2 rounded border"
                     width="50" height="50" />
              } @else {
                <i class="bi bi-file-earmark-text fs-4 text-secondary me-2"></i>
              }
              <div>
                <div class="fw-bold">{{ file.name }}</div>
                <div class="text-muted small">{{ file.id }}</div>
              </div>
            </div>
          </td>
          <td>{{ file.type }}</td>
          <td>{{ (file.size / 1024 / 1024) | number: '1.2-2' }} MB</td>
          <td>{{ file.uploadedAt | date: 'short' }}</td>
          <td>
            <button
              class="btn btn-sm btn-danger"
              (click)="removeFile(file.id)"
            >
              Remove
            </button>
          </td>
        </tr>
      } @empty {
        <tr>
          <td colspan="6" class="text-center text-muted">No files uploaded yet.</td>
        </tr>
      }
    </tbody>
  </table>
  }@else {
  <div class="alert alert-info">No files uploaded yet.</div>
  }
</div>




